# User can make a symbolic link to the jeval file
# In that case JEVAL_PATH should be resolved and
# point to the original file, otherwise we would
# not be able to find all jeval libs and jars it
# depends on
JEVAL_PATH=$(readlink "$0")
if [ $? -ne 0 ]; then
   JEVAL_PATH="$0"
fi
JEVAL_PATH=$(dirname "$JEVAL_PATH")

# Java accepts classpath either from -cp or CLASSPATH but not from both
# Because parsing JAVA_ARGS is harder than just prepend to CLASSPATH
# this script will only work if user pass classpath through CLASSPATH
# and not through JAVA_ARGS

if [ -z "${CLASSPATH}" ]; then
    CLASSPATH="${JEVAL_PATH}/jeval.jar"
else
    CLASSPATH="${JEVAL_PATH}/jeval.jar:${CLASSPATH}"
fi

java ${JAVA_ARGS} -Xnoclassgc -noverify -cp "${CLASSPATH}" id.jeval.Main "$@"
